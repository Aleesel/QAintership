# API Testing Project - Avito QA Internship

Проект содержит автоматизированные тесты для микросервиса объявлений Avito.

## Описание

Микросервис предоставляет REST API для работы с объявлениями:
- Создание объявлений
- Получение объявления по ID
- Получение всех объявлений продавца
- Получение статистики по объявлению

**Base URL**: `https://qa-internship.avito.com`


### 1. Запуск проекта

Для начала клонируйте проект себе в рабочую среду (я выполнял все в PyCharm)

Затем нужно установить модули для работы с тестами и http. Для этого в терминале папки проекта нужно запустить команду ниже:
```bash
pip install -r requirements.txt
```

### Запуск всех тестов

После установки модулей нужно запустить тестирование, так же из терминала выполнить команду ниже:
```bash
pytest
```


# Интерпретация результатов

Все тесты были успешно выполнены. Был обнаружен один баг с отрицательной ценой товара, о чем написано в [Баг-репорте](BUGS.md). 
Ниже распишу что делает каждый тест. 


## Раздел: GET /api/1/item/{id} — TestItem - получение одного товара по UUID товара

### TC-1 — Получение существующего товара

*   **Описание:** Запрос заранее созданного товара по валидному UUID.
*   **Что проверяет:**
    *   Корректное получение объекта
    *   Валидность схемы ответа
    *   Что товар в ответе совпадает с запрошенным из эталонных данных в папке test_data
*   **Ожидаемый результат:** `200 OK`, корректный JSON, схема валидна.

### TC-2 — Получение несуществующего товара

*   **Описание:** Запрос товара по UUID, который отсутствует в базе.
*   **Что проверяет:** Корректную обработку отсутствующего товара
*   **Ожидаемый результат:** `404 Not Found`.

### TC-3 — Передача невалидного ID товара

*   **Описание:** Запрос товара с ID неверного типа (число вместо UUID).
*   **Что проверяет:** Валидацию параметра `id`
*   **Ожидаемый результат:** `400 Bad Request`.

## Раздел: GET /api/1/{sellerId}/item — TestItems - получение товаров по sellerId

### TC-4 — Получение товаров по валидному sellerId

*   **Описание:** Запрос списка товаров существующего продавца.
*   **Что проверяет:**
    *   Возврат всех корректных товаров для `sellerId`
    *   Валидность структуры ответа
*   **Ожидаемый результат:** `200 OK`, список товаров продавца.

### TC-5 — Получение товаров по несуществующему sellerId

*   **Описание:** Запрос товаров по `sellerId`, которого нет в системе.
*   **Что проверяет:** Обработку отсутствующих данных
*   **Ожидаемый результат:** `200 OK`, пустой список.

### TC-6 — Передача невалидного sellerId

*   **Описание:** Передача `sellerId` неправильного формата (string вместо числа).
*   **Что проверяет:** Корректность серверной валидации
*   **Ожидаемый результат:** `400 Bad Request`.

## Раздел: GET /api/1/statistic/{id} — TestStatistics - получение статистики по UUID товара 

### TC-7 — Получение статистики существующего товара

*   **Описание:** Запрос статистики по корректному `itemId`.
*   **Что проверяет:**
    *   Валидность схемы ответа
    *   Корректность содержимого, проверяемая по эталонным данным из папки test_data
*   **Ожидаемый результат:** `200 OK`, валидная статистика.

### TC-8 — Получение статистики по несуществующему itemId

*   **Описание:** Запрос статистики по UUID, которого нет в сервисе.
*   **Что проверяет:** Корректность обработки отсутствующей статистики
*   **Ожидаемый результат:** `404 Not Found`.

### TC-9 — Получение статистики по невалидному id

*   **Описание:** Запрос с `id` неверного формата (число вместо UUID).
*   **Что проверяет:** Валидацию параметра `id`
*   **Ожидаемый результат:** `400 Bad Request`.

## Раздел: POST /api/1/item (+ DELETE /api/2/item/{id}) — TestPost - проверка создания товара 

### TC-10 — Создание товара с пустым телом

*   **Описание:** POST запрос с `{}` в теле.
*   **Что проверяет:**
    *   Валидацию обязательных полей
    *   Схему ответа сервера
*   **Ожидаемый результат:** `400 Bad Request`.

### TC-11 — Создание товара с валидным телом + удаление

*   **Описание:** Создание товара со всеми полями и последующий DELETE.
*   **Что проверяет:** Успешное создание (`CreateItemData`)
*   **Ожидаемый результат:**
    *   POST → `200 OK`
    *   DELETE → `200 OK`

### TC-12 — Создание товара с невалидным JSON

*   **Описание:** POST с повреждённым или некорректным JSON.
*   **Что проверяет:** Обработку ошибок типов данных в JSON
*   **Ожидаемый результат:** `400 Bad Request`.

### TC-13 — Создание товара с отрицательной ценой

*   **Описание:** POST с отрицательным значением `price`, затем удаление объекта.
*   **Что проверяет:** Логику бизнес-валидации. Фактическое поведение микросервиса при неверных данных.
*   **Ожидаемый результат:**
    *   POST → `200 OK` (фактическое поведение сервиса)
    *   DELETE → `200 OK`

### TC-14 — Создание товара с выходом за пределы integer

*   **Описание:** POST с value `price`, выходящим за границы `int`.
*   **Что проверяет:** Серверную числовую валидацию
*   **Ожидаемый результат:** `400 Bad Request`.

